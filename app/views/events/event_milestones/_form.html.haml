.form-group
  %label Event Type
  %input.form-control{type: :text, readonly: true, value: @event.event_type_name}
  = f.input :milestone_id, input_html: { value: @event_milestone.milestone_id }, as: :hidden

- @event_milestone.milestone.fields.entry_able.each do |field|
  - if field.field_type == 'Fields::FileField'
    - obj = @event_milestone.field_values.select{ |a| a.field_id==field.id } || f.object.field_values.new

    .fields
      = f.label field.name
      = f.fields_for :field_values, obj do |builder|
        = render 'field_value_fields', f: builder, option: { field: field, main_object: @event_milestone }
      = link_to_add_fields "+ Add File", f, :field_values, { field: field, main_object: @event_milestone }

  - else
    - obj = @event_milestone.field_values.select{ |a| a.field_id==field.id }.first || @event_milestone.field_values.find_or_initialize_by(field_id: field.id)
    = f.fields_for :field_values, obj do |builder|
      = render "events/fields/#{field.kind}", field: field, f: builder, main_object: @event_milestone

= f.button :submit, class: 'btn btn-primary'
= link_to 'Cancel', event_path(@event), class: 'btn btn-secondary'
