#content
  %nav.navbar.navbar-expand-lg.navbar-light.bg-light
    .container-fluid
      %h3 Event
      - if policy(Event).create?
        = link_to new_event_path, class: 'btn btn-primary' do
          %i.fas.fa-plus

  = render partial: "shared/no_data", locals: { items: @events }

  - if @events.present?
    %table.table.table-hover.medium-width
      %thead
        %tr
          %th Event Type
          %th Location
          %th Value
          %th Risk Level
          %th Status
          %th Open case date
          %th Owner
          %th
      %tbody
        - @events.each do |event|
          %tr
            %td
              .flex-row-vertical-center
                .small-color{style: "background-color: #{event.event_type_color}"}
                  = event.event_type_name[0]
                %span= link_to event.event_type_name, event_path(event), class: 'btn btn-link'
            %td= event.location
            %td= event.value
            %td
              - style = event.risk_level.present? ? "background-color: #{event.risk_color}; color: #fff" : ''
              %span.badge{style: style}
                = event.risk_level || '-'
            %td= event.status || 'New'
            %td= l(event.created_at, format: :long)
            %td= event.program_name
            %td
              - if policy(event).update?
                = link_to 'Edit', edit_event_path(event), class: 'badge badge-info'
                = "/"
                = link_to 'Delete', event_path(event), method: :delete, class: 'badge badge-danger', :data => {confirm: 'Are you sure to delete this event?'}

  - if @pagy.pages > 1
    .pagy-wrapper
      != pagy_bootstrap_nav(@pagy)

/ = render 'event_types_modal'
