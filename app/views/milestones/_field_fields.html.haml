%li
  %fieldset.fieldset
    .field-wrapper
      %button.btn.move{type: :button}
        %i.fa.fa-arrows-alt

      .flex-row.flex1
        .wrapper.flex-row-vertical-center.flex1
          %button.btn.collapse-trigger{type: :button}
            %i.fas.fa-caret-right

          .flex1.flex-row
            %abbr.abbr-required{:title => "required", class: ('hidden' if !f.object.required?)} *

            = f.hidden_field :field_type, class: 'field-type', 'data-field' => f.object.to_json
            = f.text_field :name, placeholder: "field_name", class: 'form-control field-name'

          .flex-row-vertical-center
            .form-check
              = f.check_box :required, { class: 'form-check-input field-required' }
              = f.label :required, t('milestone.required'), class: 'form-check-label required-label'
              = f.hidden_field :display_order, class: 'display-order'
            .form-check
              = f.check_box :tracking, { class: 'form-check-input' }
              = f.label :tracking, t('milestone.tracking'), class: 'form-check-label'

            %button.btn.btn-outline-primary.btn-add-field{type: 'button'}= t('milestone.add_field')

        .action.flex-column
          = f.hidden_field :_destroy
          .btn-group
            %a.pointer{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", style: 'width: 100%;'}
              %i.fas.fa-ellipsis-v.icon-gray
            .dropdown-menu
              %button.dropdown-item.remove_fields{type: 'button'}
                %i.fas.fa-trash-alt.icon-delete
                %span Remove
              %button.dropdown-item.validation-trigger{type: 'button'}
                %i.fas.fa-filter.icon-gray
                %span Validation

    = render 'kinds'

    .collapse-content
      = render "field_description", f: f
      = render 'mapping_field_content', f: f
      = render 'field_option_content', f: f

    = render 'field_validation_content', f: f
